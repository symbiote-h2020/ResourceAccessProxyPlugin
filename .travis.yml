language: java
env:
  global:
  - GITHUB_REPO=symbiote-h2020/ResourceAccessProxyPlugin
  - secure: YBU40mBFOUU+4BsNhp6huQt08iTieQTaE3YoEvZMcYHrAgv9xjRB4GUbvq+CFiNeR3d1hNxX6AH6GQmby2wVsREdEswmeLi4dCtmh+1SzqwuR/30JuofHxcaUMUZEuaZAO9zU33nA8LJgPZJqkVY81WIRAy0ezaEAS8SnwkgfA8ucaJzEDV83l9LPffiYjltgdUX5PW9AR4gG44LM0oOlNimY0KbQPGxwcYjb2O2JeWWmup8CSYEiaRw3Fz28cmqA0P2Q7eIoDqGCi86wFa9ccPJymp3cGkJ92BlisbkLGyvmk9ilClIofFnpRlfpiZ8Rr0XfX/iqGwhugb8vNf50ueN9Pxa/51SZpJ7Sn7PyXmEor7xcHJqp9R6vQHTGv4Cgkl6m8m7x51ETazFi/aHcR5O1/71/xTcUG0Y4N5HQMVSGYPpSCGW5zW42wyZJZ80ElNLyZZM/uKhBVBzi5SOSHJymDUy7n5hZPYxhAnUkY3zdVxsyVWMDoO+yXpjN4YNs19KqpywKTKfL6jxrifSurHXXo+e5B7rybEkBlTL1sf7PEzjlc4R7W2Y0PiBjhfE426qj/Q3uceLNiwxTdkFn017OgA44/LwS5EJj80xEZ8bjtMISv1Q0RT0OMgL5YQ5wKcw5JQR4IGuPSBUGeWbdUfc+7mcgROeKYvN2NGF5+I=
jdk:
- oraclejdk8
services:
- mongodb
sudo: required
branches:
  only:
  - staging
install: true
before_cache:
- rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
- rm -fr $HOME/.gradle/caches/*/plugin-resolution/
cache:
  directories:
  - "$HOME/.gradle/caches/"
before_script:
- chmod a+x merge_script.sh
- "./merge_script.sh"
after_success:
- chmod a+x pushing_script.sh
- "./pushing_script.sh"
- bash <(curl -s https://codecov.io/bash)
notifications:
  email:
    on_success: never
    on_failure: always
